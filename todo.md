# お問い合わせフォーム自動入力ツール 開発TODOリスト

## フェーズ1: 基本機能の実装
- [x] Node.jsプロジェクトの初期設定 (package.jsonの作成)
- [x] SeleniumとChromeDriverの導入と設定
- [x] 特定のウェブサイトを対象とした基本スクリプトの作成
    - [x] コマンドライン引数でURLを受け取る機能の実装
    - [x] SeleniumとChromeDriverで指定URLにアクセスする処理
    - [x] 対象ページのお問い合わせフォーム要素を固定セレクタで特定する処理
    - [x] 事前にスクript内で定義した固定値でフォームに自動入力する処理
    - [x] 送信ボタンをクリックする処理
    - [x] 処理完了（サンクスページへの遷移など）を待機し、成功したかを確認する処理

## フェーズ2: 汎用化と設定機能
- [x] お問い合わせページ特定ロジックの実装
    - [x] ページ内のリンクから「お問い合わせ」「コンタクト」などのキーワードを持つURLを探索する機能
    - [x] 複数の候補が見つかった場合の優先順位付けロジックを実装
- [x] フォーム要素の汎用的な特定ロジックの実装
    - [x] `name`属性、`id`属性、`<label>`タグの内容から、氏名、メールアドレスなどの各入力フィールドを推測して特定する機能
- [x] フォーム入力処理の汎用化
    - [x] テキスト入力 (`<input type="text">`)
    - [x] テキストエリア (`<textarea>`)
    - [x] ドロップダウン選択 (`<select>`)
    - [x] チェックボックス (`<input type="checkbox">`)
    - [x] ラジオボタン (`<input type="radio">`)
- [x] 設定ファイル機能の導入
    - [x] JSONまたはYAML形式の設定ファイル (`config.json` or `config.yaml`) を読み込むパーサーを導入
    - [x] 設定ファイルから入力内容（氏名、会社名、定型文など）を読み込む処理
    - [x] 設定ファイルから対象URLリストを読み込む処理

## フェーズ3: bot検知回避機能の強化
- [x] 人間らしい操作のエミュレーション機能の実装
    - [x] マウスカーソルの自然な移動をシミュレートする処理
    - [x] ページ遷移や各操作の間にランダムな待機時間を挿入する処理
    - [x] テキスト入力時に、1文字ずつランダムな間隔を空けてタイピングする処理
- [x] reCAPTCHA / hCaptcha への基本的な対応
    - [x] reCAPTCHAのチェックボックス要素を特定し、クリックする動作を実装
- [x] ブロック回避策の実装
    - [x] 複数のユーザーエージェント文字列をリストで用意し、実行ごとにランダムで切り替える機能
    - [x] ヘッドレスブラウザ実行時に`navigator.webdriver`フラグを偽装する処理

## フェーズ4: 安定性と実用性の向上
- [x] ロギング機能の実装
    - [x] 実行中の各ステップ（ページ遷移、フォーム特定、入力など）の状況をコンソールに分かりやすく出力する処理
    - [x] 成功、失敗、エラーなどの最終結果をログファイルに記録する機能
- [x] エラーハンドリングの強化
    - [x] お問い合わせフォームが見つからない場合のエラー処理
    - [x] 指定された入力項目が見つからない場合のエラー処理
    - [x] フォーム送信に失敗した場合のエラー処理
    - [x] ページの読み込みや要素の出現に対するタイムアウト処理
- [x] 高度なオプション機能の実装
    - [x] 設定ファイルで指定されたプロキシサーバーを経由してアクセスする機能
- [x] コードのモジュール化
    - [x] 機能ごと（ページ探索、フォーム操作、設定管理など）に処理をファイル分割し、コードの可読性と保守性を向上させる